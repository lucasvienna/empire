# Empire v0.1.0 Roadmap

**Version**: 0.1.0 - Minimal Viable Game Loop **Created**: 2025-12-26 **Status**: Planning Complete

---

## Overview

Empire v1.0 delivers a complete base-building game loop: **Build → Train → Attack → Expand**.
Players can construct buildings, produce resources, train military units, engage in combat with
other players or NPCs, and use plundered resources to grow their empire.

### Success Criteria

A new player can:

1. Start with a realm and starter buildings (Keep, Farm)
2. Build and upgrade buildings to produce resources (Food, Wood, Stone, Gold)
3. Train units from military buildings (Infantry, Ranged, Cavalry, Artillery)
4. Attack NPCs or other players to plunder resources
5. Use gained resources to expand their realm and military power

### Out of Scope for v0.1.0

- Tech research system (deferred to v0.2.0+)
- Religious buildings (Church, Monument)
- Social buildings (Guild Hall, Market, Embassy)
- Decorative buildings
- Mage units (requires tech research)
- Advanced combat features (terrain, weather, formations)
- Alliance/diplomacy systems

---

## Milestones

The v0.1.0 release is divided into 3 sequential milestones:

### Milestone 5: Unit Training System

**Dependencies**: Building System (complete), Resource Production (complete) **Estimated Duration**:
3-4 weeks

Implement complete unit training system for 4 military unit types with faction bonuses.

**Issues**:

- #95: Design Unit Data Model and Database Schema (M)
- #96: Seed Unit Definitions and Costs Data (S)
- #97: Implement Unit Domain Models and Repository (L)
- #98: Implement Unit Training Service Layer (XL)
- #99: Create Unit Training API Endpoints (L)
- #100: Integrate Unit Training with Job Queue System (M)
- #101: Implement Unit Capacity System (M)

**Critical Path**: #95 → #96 → #97 → #98 → #99, #100, #101 (parallel)

---

### Milestone 6: Combat System

**Dependencies**: Unit Training System (milestone #5) **Estimated Duration**: 4-5 weeks

Implement basic combat mechanics with unit type advantages and resource plunder.

**Issues**:

- #102: Design Combat System and Unit Type Advantages (M)
- #103: Implement Combat Engine and Calculation Logic (XL)
- #104: Create Combat History and Logging System (M)
- #105: Implement Attack Service Layer and Transaction Handling (XL)
- #106: Create Combat API Endpoints (L)
- #107: Implement NPC Attack System (L)

**Critical Path**: #102 → #103 → #104 → #105 → #106, #107 (parallel)

---

### Milestone 7: v0.1.0 Polish & Balance

**Dependencies**: Combat System (milestone #6) **Estimated Duration**: 2-3 weeks

Balance, polish, and document the game for initial playability.

**Issues**:

- #108: Balance Unit Stats and Costs (M)
- #109: Balance Resource Production and Building Costs (M)
- #110: Create Comprehensive API Documentation (L)
- #111: Improve Error Handling and Validation Across All Systems (L)
- #112: Performance Optimization and Database Indexing (M)
- #113: Integration Testing for Complete Game Loop (XL)

**Critical Path**: #108, #109 (parallel) → #110, #111, #112, #113 (parallel)

---

## Total Estimated Timeline

**Total Duration**: 9-12 weeks (2-3 months)

- Unit Training: 3-4 weeks
- Combat System: 4-5 weeks
- Polish & Balance: 2-3 weeks

**Note**: Timeline is progress-based, not time-based. Actual duration will vary based on development
velocity and complexity discovered during implementation.

---

## Game Mechanics Summary

### Resources (4 types)

- **Food**: Produced by Farms, required for unit training
- **Wood**: Produced by Lumberyards, required for buildings and some units
- **Stone**: Produced by Quarries, required for building upgrades
- **Gold**: Produced by Mines, required for advanced units

### Factions (5 types)

- **Humans**: +15% Wood production, +15% Cavalry training/ATK/DEF
- **Orcs**: +15% Stone production, +15% Infantry training/ATK/DEF
- **Elves**: +15% Food production, +15% Ranged training/ATK/DEF
- **Dwarves**: +15% Gold production, +15% Artillery training/ATK/DEF
- **Goblins**: +20% Population, +20% General training speed

### Unit Types (4 types)

- **Infantry** (Barracks): Melee fighters, strong vs Ranged
- **Ranged** (Range): Archers/crossbowmen, strong vs Cavalry
- **Cavalry** (Stable): Mounted units, strong vs Artillery
- **Artillery** (Workshop): Siege weapons, strong vs Infantry

### Combat Mechanics

- **Rock-Paper-Scissors**: Unit type advantages (1.5x effectiveness when strong)
- **Faction Bonuses**: Applied to ATK/DEF in combat
- **Deterministic**: No randomness in v0.1.0 (pure calculation)
- **Losses**: Winner loses 5-10%, loser loses 30-80%
- **Plunder**: Winner takes 10-50% of loser's resources based on combat ratio

### Building System (Already Complete)

- Construction/upgrade with resource costs
- Manual upgrade confirmation (satisfying progression)
- Building prerequisites enforced
- Resource production via background jobs
- Modifier system integration

---

## API Design Principles

For the Svelte `realm` client:

1. **RESTful Endpoints**: Clear, consistent API structure
2. **Rich Responses**: Include all data needed for UI rendering
3. **Error Messages**: Actionable, specific, client-friendly
4. **Timestamps**: ISO 8601 format for all dates/times
5. **Pagination**: Support for large lists (combat logs, units)
6. **ULID IDs**: 26-character base32 identifiers
7. **Session Auth**: Token-based authentication with middleware

---

## Development Workflow

### Issue Workflow

1. Pick issue from current milestone (follow critical path)
2. Create feature branch: `feature/{issue-number}-{short-description}`
3. Implement with tests (unit + integration where applicable)
4. Self-review against acceptance criteria
5. Create PR, link to issue
6. Merge to `main` after review
7. Close issue automatically via PR merge

### Testing Strategy

- **Unit Tests**: For business logic (combat calculations, modifiers, etc.)
- **Integration Tests**: For full API flows (end-to-end scenarios)
- **Manual Testing**: For game balance and UX (playtest sessions)
- **Performance Tests**: For critical paths (combat resolution, resource updates)

### Documentation Requirements

- Update AGENTS.md if patterns change
- Add AIDEV-NOTE comments for complex code
- Update API docs as endpoints are added
- Document balance decisions in docs/game_balance.md

---

## Risk Factors & Mitigation

### Risk: Combat Balance Issues

- **Mitigation**: Extensive playtesting, spreadsheet modeling, iterative tuning
- **Fallback**: Adjustable multipliers via config (easy to tune)

### Risk: Performance Under Load

- **Mitigation**: Database indexing, query optimization, connection pooling
- **Fallback**: Add Redis caching if needed (not planned for v1.0)

### Risk: Race Conditions in Combat/Training

- **Mitigation**: Database transactions, advisory locks, idempotent operations
- **Fallback**: Queue-based processing if needed (architecture supports it)

### Risk: Client-Server API Mismatch

- **Mitigation**: Comprehensive API documentation, OpenAPI spec, examples
- **Fallback**: Coordinate with client developer, iterate on contracts

---

## Post-v0.1.0 Vision

### v0.2.0 (Tech Research System)

- Academy/University buildings
- Tech tree with prerequisites
- Research queue (parallel to training)
- Tech unlocks for advanced units/buildings
- Mage units (requires Laboratory)

### v0.3.0 (Economy & Progression)

- Achievements and quests
- Leaderboards and rankings
- Daily/weekly events
- Player progression rewards

### v0.4.0 (Advanced Combat)

- Defensive buildings (Walls garrison mechanic)
- Terrain and weather effects
- Combat formations
- Hero units with special abilities
- Siege mechanics

### v0.5.0 (Social Features)

- Guild system (Guild Hall building)
- Player trading (Market building)
- Resource marketplace
- Alliances and diplomacy (Embassy building)
- Guild vs guild combat

### v1.0.0 (Full Release)

- All features polished and balanced
- Complete game loop with all systems integrated
- Production-ready infrastructure
- Comprehensive documentation

---

## Issue Reference

### Unit Training System (Milestone #5)

- [#95](https://github.com/lucasvienna/empire/issues/95) - Unit Data Model (M)
- [#96](https://github.com/lucasvienna/empire/issues/96) - Unit Seed Data (S)
- [#97](https://github.com/lucasvienna/empire/issues/97) - Unit Domain Models (L)
- [#98](https://github.com/lucasvienna/empire/issues/98) - Training Service Layer (XL)
- [#99](https://github.com/lucasvienna/empire/issues/99) - Training API Endpoints (L)
- [#100](https://github.com/lucasvienna/empire/issues/100) - Job Queue Integration (M)
- [#101](https://github.com/lucasvienna/empire/issues/101) - Unit Capacity System (M)

### Combat System (Milestone #6)

- [#102](https://github.com/lucasvienna/empire/issues/102) - Combat Design (M)
- [#103](https://github.com/lucasvienna/empire/issues/103) - Combat Engine (XL)
- [#104](https://github.com/lucasvienna/empire/issues/104) - Combat Logging (M)
- [#105](https://github.com/lucasvienna/empire/issues/105) - Attack Service Layer (XL)
- [#106](https://github.com/lucasvienna/empire/issues/106) - Combat API Endpoints (L)
- [#107](https://github.com/lucasvienna/empire/issues/107) - NPC Attack System (L)

### Polish & Balance (Milestone #7)

- [#108](https://github.com/lucasvienna/empire/issues/108) - Unit Balance (M)
- [#109](https://github.com/lucasvienna/empire/issues/109) - Resource Balance (M)
- [#110](https://github.com/lucasvienna/empire/issues/110) - API Documentation (L)
- [#111](https://github.com/lucasvienna/empire/issues/111) - Error Handling (L)
- [#112](https://github.com/lucasvienna/empire/issues/112) - Performance Optimization (M)
- [#113](https://github.com/lucasvienna/empire/issues/113) - Integration Testing (XL)

---

## Next Steps

1. **Start with Milestone #5 (Unit Training)**
   - Begin with issue #95 (Unit Data Model)
   - Follow critical path: schema → seeds → models → service → API

2. **Setup Project Tracking**
   - Add issues to GitHub Project (if using)
   - Set up milestone view for progress tracking
   - Create kanban board: To Do / In Progress / Review / Done

3. **Coordinate with Client Team**
   - Share API documentation as endpoints are built
   - Establish communication channel (Discord/Slack)
   - Schedule regular sync meetings (weekly?)

4. **Establish Testing Cadence**
   - Run integration tests on every commit
   - Manual playtesting sessions weekly
   - Balance review after each milestone

---

**Last Updated**: 2025-12-26 **Maintainer**: Lucas Vienna (@lucasvienna) **Status**: Planning
Complete, Ready for Development
